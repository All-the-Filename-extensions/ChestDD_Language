# EGFMD: Extended GitHub Flavored MarkDown / 拡張 GitHub フレーバ MarkDown

EGFMD(Extended GitHub Flavored MarkDown, 拡張 GitHub フレーバ MarkDown)は、[GitHub Flavored MarkDown](https://github.github.com/gfm/) をもとにいくつかの拡張を施した MarkDown フレーバ。UMD(Universal MarkDown)が策定し提供が開始されるまでの間における、喫緊の必要を満たすために策定された。

以下で特に指定がある場合を除き、通常の GitHub Flavored MarkDown に同じ。

## 文字 (GFMD 2.1, 2.2 関係)

空白トークンとして有効なのは空白文字(`U+0020`)のみであり、タブ文字、改行文字等はその通りに扱われる。

タブ文字は特別な扱いがなされず、通常の非句読文字と同様に扱われる。

## 段落・改行 (GFMD 2.1, 2.2, 4.4 関係)

物理改行が論理改行となる。空行に囲まれた複数行の文章がまとめて一つの段落として扱われる。

2(或いは 4)の倍数のスペースが行頭にある場合、インデントとして扱われ、コードブロックとはならない。

## 見出し形式 (GFMD 4.2, 4.3 関係)

ATX 形式にのみ限局し、Setext 形式は無効とする。

### コードフェンス (GFMD 4.5 関係)

コードフェンスの囲いとして有効な文字を、バッククォート `` ` `` のみに限る。

ブロックコードの場合、3 字のバッククォートのみ或いはそれに続いて言語符号のみの行で始まり、3 字のバッククォートのみの行で終わる形式が、インラインコードの場合、バッククォート一個ずつでコードが囲われ或いは始まりのバッククォートに先だって角括弧`[]`に囲われた言語符号を持つ形式が有効であり、その他の形式を除外する。

言語符号を伴う場合、その示す言語に応じたシンタックスハイライトが行われることが望ましい。

### HTML 挿入 (GFMD 4.6 関係)

GFMD で有効な HTML 挿入のうち、`<![CDATA[`以外のものが引き続き有効である。しかし、ＥＧＦＭＤにて特有の構文がある場合、その構文を用いるべきである。

## テーブル (GFMD 4.10 関係)

一般の MarkDown における形式ではなく、[ChestDD TC92 Tabular](./../tc/tab.292/spec.md)に準拠した形式が用いられる。

セル内においても、文字に対する書式など、他の EGFMD 文法が有効である。

## 文字に対する書式 (GFMD 6.4 関係)

## マルチメディア・ファイル挿入 (GFMD 6.7 関係)

画像のほか、動画、音声、テキスト、その他各種ファイルを挿入できる。通常の画像挿入構文を他のメディア形式についても用いる。

いずれのタグに変換されるかは拡張子或いは文字コードによる。画像、動画、音声又はテキストとして割り当てられた拡張子を持つ場合、それぞれ画像、動画、音声又はテキストとして埋め込まれ、そうでない場合、テキストファイルと認識可能な場合はテキストとして、そうでない場合はその他各種ファイルとして埋め込まれる。

画像は`<img>`タグ、動画は`<video>`タグ、音声は`<audio>`タグ(通常)又は`iframe`タグ(YoutTube 等の動画共有サービスの場合)で埋め込まれ、その他各種ファイルはサムネイル(サムネイルが取得不可能な場合ファイル種別に応じたファイルアイコン)及びファイル名によるダウンロードリンク付のカード形式、テキストは下に先頭数行のプレビューを伴った、その他各種ファイルと同様の形式で埋め込まれる。

また画像、動画、音声については一部の属性が許可される。これはリンクを記述する括弧に続いて波括弧`{}`にて囲んでスペース区切りで続ける。

画像、動画、音声又はテキストとして認識される拡張子及び画像、動画、音声で許可される属性は次の表のとおり。

| 形式        | 拡張子                                                                                           | 属性                                                                                           |
| ----------- | ------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------- |
| 画像/img    | `.png`,`.jepg`,`.jpg`,`.pjpg`,`.pjp`,`.jpe`,`.jfjf`,`.jif`,`.tiff`,`.tif`,`.webp`,`.svg`,`.svgz` |                                                                                                |
| 動画/video  | `.mp4`,`.avi`,`.mov`,`.wmv`,`.mpg`,`.mpeg`,`.mkv`,`.msv`,`.asf`                                  | `autoplay`, `buffered`, `controls`, `crossorigin`, `muted`, `preload`, `currentTime`, `poster` |
| 動画/iframe | 該当なし                                                                                         | `frameborder` `allow`,`allowfullscreen`,`title`,`start`                                        |
| 音声/audio  | `wav` ,`.aif`,`.mp3` ,`.aac`,`.flac`                                                             | `autoplay`, `controls`,`rossorigin`, `loop`, `muted`, `preload`, `currentTime`                 |
| テキスト    | `.txt`                                                                                           | 該当なし                                                                                       |

## 段組み (GFMD 該当なし)

3 つのパイプ`|`でのみ構成される行で囲われ、及び区切られる段落は、段組み処理がなされる。ただし段組みの開始行においては 3 つのパイプ`|`のほか、段数を示す数字も伴う。

の形式の下に先頭数行のプレビュー## 目次・脚注・参考文献 (GFMD 該当なし)

目次・脚注・参考文献

## コメント (GFMD 該当なし)

単一のパーセント`%`及び空白に続く文字列は単一行コメントとして、3 つのパーセント`%`でのみ構成される行で囲まれる行では複数行コメントとして扱われる。
